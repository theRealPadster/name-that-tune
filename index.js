var spurdle=(()=>{var e,s=Object.create,l=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.getPrototypeOf,o=Object.prototype.hasOwnProperty,t=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("react"===e)return Spicetify.React;if("react-dom"===e)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),u=(t,a,s,r)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of n(a))o.call(t,e)||e===s||l(t,e,{get:()=>a[e],enumerable:!(r=i(a,e))||r.enumerable});return t},a=(e,t,a)=>(a=null!=e?s(r(e)):{},u(!t&&e&&e.__esModule?a:l(a,"default",{value:e,enumerable:!0}),e)),c={},d=c,p={default:()=>function(){return h.default.createElement(_,null)}};for(e in p)l(d,e,{get:p[e],enumerable:!0});var m={container:"app-module__container___thHYo_spurdle",title:"app-module__title___jzQAy_spurdle",subtitle:"app-module__subtitle___eYtbK_spurdle",button:"app-module__button___c1Bae_spurdle",counter:"app-module__counter___ch4KT_spurdle",guessList:"app-module__guessList___F8WJL_spurdle"},f=a(t("react")),g=a(t("react")),y=e=>{var t=e.guess===e.answer;return g.default.createElement("li",null,t?"âœ”":"x"," ",e.guess)},_=class extends f.default.Component{constructor(){super(...arguments),this.state={stage:0,timeAllowed:1,guess:"",guesses:[],won:!1},this.playSegmentClick=()=>{{var e=this.state.timeAllowed;console.log("Playing section "+e);const s=1e3*e,r=Spicetify.Player.getDuration();if(!(s>r)){Spicetify.showNotification(`Playing from 0s to ${e}s`),Spicetify.Player.seek(0),Spicetify.Player.play();let a=0;const l=e=>{if(a)return console.log("debouncing"),void(500<e.timeStamp-a&&(a=0,console.log("reset debouncing")));var t=r*Spicetify.Player.getProgressPercent();console.log({currentProgress:t,endMilliseconds:s}),t>s&&(a=e.timeStamp,Spicetify.Player.pause(),console.log("stopping"),Spicetify.Player.removeEventListener("onprogress",l))};Spicetify.Player.addEventListener("onprogress",l)}return}},this.submitGuess=e=>{e.preventDefault();var t=this.state.guess.trim().toLowerCase();if(0!==t.length){console.log(e),console.log("title: "+Spicetify.Player.data.track.metadata.title),console.log("artist_name: "+Spicetify.Player.data.track.metadata.artist_name),console.log("album_artist_name: "+Spicetify.Player.data.track.metadata.album_artist_name);e=t===Spicetify.Player.data.track.metadata.title.trim().toLowerCase();if(e){var a=!0;const s=document.querySelector(".main-nowPlayingWidget-nowPlaying");s&&(s.style.opacity=a?"1":"0")}this.setState({guesses:[...this.state.guesses,t],guess:"",stage:this.state.stage+1,timeAllowed:this.state.timeAllowed+1,won:e})}},this.guessChange=e=>this.setState({guess:e.target.value})}render(){return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:m.container},f.default.createElement("h1",{className:m.title},"ðŸŽµ Spurdle!"),this.state.won?f.default.createElement("h2",{className:m.subtitle},"You won!"):null,f.default.createElement("ol",{className:m.guessList},this.state.guesses.map((e,t)=>f.default.createElement(y,{key:t,guess:e,answer:Spicetify.Player.data.track.metadata.title}))),f.default.createElement("form",{id:"guessForm",onSubmit:this.submitGuess},f.default.createElement("input",{type:"text",className:m.input,placeholder:"Guess the song",value:this.state.guess,onChange:this.guessChange}),f.default.createElement("button",{type:"submit",className:m.button},"Guess")),f.default.createElement("button",{className:m.button,onClick:this.playSegmentClick},`Play ${this.state.timeAllowed}s`)))}},h=a(t("react"));return a=c,u(l({},"__esModule",{value:!0}),a)})();const render=()=>spurdle.default();